{% extends 'layout.html' %}

{% block content %}
<div class="row">
  <div class="col-md-6">
    <h1>웹 프로그래밍 과제</h1>
    <p class="lead">Node.js와 Express를 이용한 웹 애플리케이션입니다.</p>
    <img src="/images/main.jpeg" class="img-fluid rounded mb-3" alt="메인 이미지">
  </div>
  <div class="col-md-6">
    {% if not user %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">로그인</h5>
        <form action="/auth/login" method="post">
          <div class="mb-3">
            <label for="email" class="form-label">이메일</label>
            <input type="email" class="form-control" id="email" name="email" required>
          </div>
          <div class="mb-3">
            <label for="password" class="form-label">비밀번호</label>
            <input type="password" class="form-control" id="password" name="password" required>
          </div>
          <button type="submit" class="btn btn-primary">로그인</button>
        </form>
        <hr>
        <p class="mb-0">계정이 없으신가요? <a href="/account">회원가입</a></p>
      </div>
    </div>
    {% else %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">환영합니다!</h5>
        <p class="card-text">{{user.username}}님 안녕하세요.</p>
        <a href="/profile" class="btn btn-primary">내 프로필</a>
        <a href="/board" class="btn btn-secondary">게시판</a>
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}

{% block script %}
<script>
  window.onload = () => {
    if (new URL(location.href).searchParams.get('error')) {
      alert(new URL(location.href).searchParams.get('error'));
    }
  };
</script>
{% endblock %}
